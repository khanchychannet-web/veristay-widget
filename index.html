<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VeriStay ‚Äî Check</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#f7fafb;padding:24px}
  .card{max-width:680px;margin:0 auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 8px 28px rgba(0,0,0,.08)}
  h1{margin:0 0 8px;font-size:22px}
  .muted{color:#607d8b;font-size:14px}
  .row{display:flex;gap:8px;margin:16px 0}
  input[type=url]{flex:1;padding:12px;border:1px solid #cfd8dc;border-radius:8px}
  button{padding:12px 16px;border:0;border-radius:8px;background:#008C9E;color:#fff;cursor:pointer;font-weight:600}
  .result{margin-top:16px;padding:16px;border-radius:10px}
  .green{background:#e8f5e9;border:1px solid #a5d6a7}
  .amber{background:#fff8e1;border:1px solid #ffe082}
  .red{background:#ffebee;border:1px solid #ef9a9a}
  ul{margin:8px 0 0 18px}
</style>
</head>
<body>
  <div class="card">
    <h1>üîç VeriStay Score</h1>
    <p class="muted">–í—Å—Ç–∞–≤ –ª—ñ–Ω–∫ –Ω–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è (Daft/Facebook). –û—Ç—Ä–∏–º–∞—î—à –æ—Ü—ñ–Ω–∫—É –±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ.</p>
    <div class="row">
      <input id="url" type="url" placeholder="https://www.daft.ie/..." required>
      <button id="checkBtn">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
    </div>
    <div id="out"></div>
    <p class="muted">–ó–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è: —Ü–µ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∏–∑–∏–∫—É, –∞ –Ω–µ —é—Ä–∏–¥–∏—á–Ω–∞ –ø–æ—Ä–∞–¥–∞.</p>
  </div>
<script>
const API = "https://veristay-score.onrender.com/score"; // —Ç–≤—ñ–π Render URL
const $url = document.getElementById('url');
const $btn = document.getElementById('checkBtn');
const $out = document.getElementById('out');

async function check() {
  const link = $url.value.trim();
  if (!link) return;
  $btn.disabled = true; $btn.textContent = "–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ..."; $out.innerHTML = "";
  try{
    const res = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url: link })
    });
    const data = await res.json();
    if (data.error) throw new Error(data.error);
    const band = (data.band||"Amber").toLowerCase();
    const cls = band==="green"?"green":(band==="red"?"red":"amber");
    const reasons = (data.reasons||[]).map(r=>`<li>${r}</li>`).join("");
    $out.innerHTML = `<div class="result ${cls}">
      <strong>–û—Ü—ñ–Ω–∫–∞:</strong> ${data.score}/100 ‚Äî <strong>${data.band}</strong><br/>
      <strong>–ß–æ–º—É:</strong><ul>${reasons || "<li>–°–µ—Ä–π–æ–∑–Ω–∏—Ö —Ä–∏–∑–∏–∫—ñ–≤ –Ω–µ –≤–∏—è–≤–ª–µ–Ω–æ.</li>"}</ul>
    </div>`;
  }catch(e){
    $out.innerHTML = `<div class="result red"><strong>–ü–æ–º–∏–ª–∫–∞:</strong> ${e.message}</div>`;
  }finally{
    $btn.disabled=false; $btn.textContent="–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏";
  }
}
$btn.addEventListener('click', check);
$url.addEventListener('keydown', e=>{ if(e.key==='Enter') check(); });
</script>
</body>
</html>
